{"changed":false,"filter":false,"title":"articles.js","tooltip":"/protoAngular/packages/articles/public/controllers/articles.js","value":"'use strict';\n\nangular.module('mean.articles').controller('ArticlesController', ['$scope', '$stateParams', '$location', 'Global', 'Articles',\n  function($scope, $stateParams, $location, Global, Articles) {\n    $scope.global = Global;\n\n    $scope.hasAuthorization = function(article) {\n      if (!article || !article.user) return false;\n      return $scope.global.isAdmin || article.user._id === $scope.global.user._id;\n    };\n\n    $scope.create = function(isValid) {\n      if (isValid) {\n        var article = new Articles({\n          title: this.title,\n          content: this.content\n        });\n        article.$save(function(response) {\n          $location.path('articles/' + response._id);\n        });\n\n        this.title = '';\n        this.content = '';\n      } else {\n        $scope.submitted = true;\n      }\n    };\n\n    $scope.remove = function(article) {\n      if (article) {\n        article.$remove();\n\n        for (var i in $scope.articles) {\n          if ($scope.articles[i] === article) {\n            $scope.articles.splice(i, 1);\n          }\n        }\n      } else {\n        $scope.article.$remove(function(response) {\n          $location.path('articles');\n        });\n      }\n    };\n\n    $scope.update = function(isValid) {\n      if (isValid) {\n        var article = $scope.article;\n        if (!article.updated) {\n          article.updated = [];\n        }\n        article.updated.push(new Date().getTime());\n\n        article.$update(function() {\n          $location.path('articles/' + article._id);\n        });\n      } else {\n        $scope.submitted = true;\n      }\n    };\n\n    $scope.find = function() {\n      Articles.query(function(articles) {\n        $scope.articles = articles;\n      });\n    };\n\n    $scope.findOne = function() {\n      Articles.get({\n        articleId: $stateParams.articleId\n      }, function(article) {\n        $scope.article = article;\n      });\n    };\n  }\n]);\n","undoManager":{"mark":-1,"position":-1,"stack":[]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":10,"column":0},"end":{"row":14,"column":28},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1410982799456}