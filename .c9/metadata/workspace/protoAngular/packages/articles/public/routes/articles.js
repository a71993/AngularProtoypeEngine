{"changed":false,"filter":false,"title":"articles.js","tooltip":"/protoAngular/packages/articles/public/routes/articles.js","value":"'use strict';\n\n//Setting up route\nangular.module('mean.articles').config(['$stateProvider',\n  function($stateProvider) {\n    // Check if the user is connected\n    var checkLoggedin = function($q, $timeout, $http, $location) {\n      // Initialize a new promise\n      var deferred = $q.defer();\n\n      // Make an AJAX call to check if the user is logged in\n      $http.get('/loggedin').success(function(user) {\n        // Authenticated\n        if (user !== '0') $timeout(deferred.resolve);\n\n        // Not Authenticated\n        else {\n          $timeout(deferred.reject);\n          $location.url('/login');\n        }\n      });\n\n      return deferred.promise;\n    };\n\n    // states for my app\n    $stateProvider\n      .state('all articles', {\n        url: '/articles',\n        templateUrl: 'articles/views/list.html',\n        resolve: {\n          loggedin: checkLoggedin\n        }\n      })\n      .state('create article', {\n        url: '/articles/create',\n        templateUrl: 'articles/views/create.html',\n        resolve: {\n          loggedin: checkLoggedin\n        }\n      })\n      .state('edit article', {\n        url: '/articles/:articleId/edit',\n        templateUrl: 'articles/views/edit.html',\n        resolve: {\n          loggedin: checkLoggedin\n        }\n      })\n      .state('article by id', {\n        url: '/articles/:articleId',\n        templateUrl: 'articles/views/view.html',\n        resolve: {\n          loggedin: checkLoggedin\n        }\n      });\n  }\n]);\n","undoManager":{"mark":-1,"position":-1,"stack":[]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":29,"column":43},"end":{"row":29,"column":43},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1410982808293}